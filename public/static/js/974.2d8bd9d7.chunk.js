"use strict";(self.webpackChunksocial_network_app=self.webpackChunksocial_network_app||[]).push([[974],{8460:function(n,e,s){s.d(e,{E:function(){return d}});var i=s(1502),t=s(9434),r=s(2791),a=s(9722),l=s(8931),o=s(262),c=s(1363),u=s(184),d=function(){var n=(0,t.I0)(),e=(0,l.UO)(),s=(0,t.v9)((function(n){return n.postModule})).posts,d=(0,t.v9)((function(n){return n.postModule})).pageNumber,f=(0,t.v9)((function(n){return n.postModule})).isPostsLoading,m=(0,t.v9)((function(n){return n.postModule})).postsLength,h=function(){var i={pageNumber:d};e.userId&&(i.userId=e.userId),(m||s)&&m!==(null===s||void 0===s?void 0:s.length)&&(n((0,o.v)(i)),n((0,o.dH)()),n((0,o.bs)()))},p=function(){(null===s||void 0===s?void 0:s.length)>=m||window.scrollY+window.innerHeight+.9>=document.documentElement.scrollHeight&&h()};return(0,r.useEffect)((function(){return window.addEventListener("scroll",p),function(){window.removeEventListener("scroll",p)}}),[m]),s?(0,u.jsxs)("section",{className:"posts-list",children:[s.map((function(n){return(0,u.jsx)(i.G,{post:n},n._id)})),(0,u.jsxs)("div",{onClick:h,className:"load-more",children:[!f&&(null===s||void 0===s?void 0:s.length)<m&&(0,u.jsx)("p",{className:"load-btn",children:(0,u.jsx)("span",{children:(0,u.jsx)(c.G,{icon:"fa-solid fa-caret-down"})})}),f&&(null===s||void 0===s?void 0:s.length)<m&&(0,u.jsx)("span",{className:"gif-container",children:(0,u.jsx)("img",{className:"loading-gif",src:a,alt:""})}),(null===s||void 0===s?void 0:s.length)===m&&(0,u.jsx)("p",{children:"This is the end.."})]})]}):(0,u.jsx)("div",{className:"posts-list",children:(0,u.jsx)("span",{className:"gif-container",children:(0,u.jsx)("img",{className:"loading-gif",src:a,alt:""})})})}},4974:function(n,e,s){s.r(e),s.d(e,{default:function(){return b}});var i=s(1413),t=s(4165),r=s(5861),a=s(9439),l=s(8931),o=s(2791),c=s(9434),u=s(1363),d=s(8874),f=s(8460),m=s(9334),h=s(9722),p=s(4942),v=s(4029),g=s(1672),x=s(184);function j(n){var e=n.toggleShowEditModal,s=n.user,l=(0,c.I0)(),d=(0,o.useState)({age:s.age,bg:s.bg,email:s.email,fullname:s.fullname,imgUrl:s.imgUrl,phone:s.phone,profession:s.profession,birthDate:s.birthDate}),f=(0,a.Z)(d,2),m=f[0],h=f[1],j=m.age,N=(m.bg,m.email),b=m.fullname,w=m.imgUrl,Z=m.phone,_=m.profession;m.birthDate;(0,o.useEffect)((function(){}),[]);var y=function(n){var e=n.target,t=e.name,r="number"===e.type?+e.value||"":e.value;h((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,p.Z)({_id:s._id},t,r))}))},k=function(){var n=(0,r.Z)((0,t.Z)().mark((function n(e){var s;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,g.T)(e);case 2:s=n.sent,h((function(n){return(0,i.Z)((0,i.Z)({},n),{},{imgUrl:s.url})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,x.jsxs)("section",{className:"edit-modal",children:[(0,x.jsx)("div",{className:"bg",onClick:e}),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsxs)("div",{className:"title",children:[(0,x.jsx)("p",{children:"Edit profile"}),(0,x.jsx)("span",{onClick:e,children:(0,x.jsx)(u.G,{icon:"fa-solid fa-x"})})]}),(0,x.jsx)("div",{className:"form-container",children:(0,x.jsxs)("form",{className:"form",action:"",children:[(0,x.jsxs)("label",{htmlFor:"imgUrl",className:"add-file",children:[(0,x.jsxs)("div",{className:"add-btn",children:[(0,x.jsx)("p",{children:"Add image profile"}),(0,x.jsx)(u.G,{className:"upload-logo",icon:"fa-solid fa-cloud-arrow-up"})]}),(0,x.jsx)("input",{onChange:k,id:"imgUrl",type:"file",name:"imgUrl",hidden:!0}),(0,x.jsx)("img",{className:"img-to-upload",src:w,alt:""})]}),(0,x.jsxs)("label",{htmlFor:"first-name",className:"first-name",children:[(0,x.jsxs)("p",{children:["Fullname ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsx)("input",{name:"fullname",onChange:y,id:"fullname",type:"text",value:b||""})]}),(0,x.jsxs)("label",{htmlFor:"email",className:"email",children:[(0,x.jsx)("p",{children:"Email"}),(0,x.jsx)("input",{name:"email",onChange:y,id:"email",type:"email",value:N||""})]}),(0,x.jsxs)("label",{htmlFor:"profession",className:"profession",children:[(0,x.jsx)("p",{children:"Profession"}),(0,x.jsx)("input",{name:"profession",onChange:y,id:"profession",type:"text",value:_||""})]}),(0,x.jsxs)("label",{htmlFor:"age",className:"age",children:[(0,x.jsx)("p",{children:"Age"}),(0,x.jsx)("input",{name:"age",onChange:y,id:"age",type:"number",value:j||""})]}),(0,x.jsxs)("label",{htmlFor:"phone",className:"phone",children:[(0,x.jsx)("p",{children:"Phone"}),(0,x.jsx)("input",{name:"phone",onChange:y,id:"phone",type:"text",value:Z||""})]})]})}),(0,x.jsx)("div",{className:"btn-save-container",children:(0,x.jsx)("button",{onClick:function(){l((0,v.Nq)((0,i.Z)((0,i.Z)({},s),m))).then((function(n){n&&e()}))},children:"Save"})})]})]})}var N=s(262);var b=function(){var n=(0,l.UO)(),e=(0,l.k6)(),s=(0,c.I0)(),p=(0,o.useState)(null),g=(0,a.Z)(p,2),b=g[0],w=g[1],Z=(0,o.useState)(!1),_=(0,a.Z)(Z,2),y=_[0],k=_[1],I=(0,o.useState)(!1),S=(0,a.Z)(I,2),C=S[0],E=S[1],O=(0,o.useState)(null),U=(0,a.Z)(O,2),F=U[0],M=U[1],J=(0,c.v9)((function(n){return n.postModule})).posts,D=(0,c.v9)((function(n){return n.userModule})).loggedInUser;(0,o.useEffect)((function(){!function(){var n,e=null===D||void 0===D||null===(n=D.connections)||void 0===n?void 0:n.some((function(n){return(null===n||void 0===n?void 0:n.userId)===(null===b||void 0===b?void 0:b._id)}));M(e)}()}),[b]);var L=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.W.getById(n.userId);case 2:s=e.sent,w((function(){return s}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){k((function(n){return!n}))},q=function(){E((function(n){return!n}))},G=function(){var n=(0,r.Z)((0,t.Z)().mark((function n(){var e,r,a,l;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(b){n.next=2;break}return n.abrupt("return");case 2:!0===F?(e=JSON.parse(JSON.stringify(b)),(r=JSON.parse(JSON.stringify(D))).connections=r.connections.filter((function(n){return n.userId!==e._id})),e.connections=e.connections.filter((function(n){return n.userId!==r._id})),s((0,v.Nq)(r)),s((0,v.Nq)(e)),w((function(n){return(0,i.Z)((0,i.Z)({},n),e)}))):!1===F&&(a=JSON.parse(JSON.stringify(b)),l=JSON.parse(JSON.stringify(D)),a.connections.unshift({userId:l._id,fullname:l.fullname}),l.connections.push({userId:a._id,fullname:a.fullname}),s((0,v.Nq)(l)),s((0,v.Nq)(a)),w(a));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();if((0,o.useEffect)((function(){var e={userId:n.userId};return s((0,N.rd)("profile")),s((0,N.L6)(e)),L(),s((0,N.Nz)(e)),s((0,N.Cd)()),function(){s((0,N.L6)(null))}}),[n.userId,D]),!b)return(0,x.jsx)("section",{className:"feed-load",children:(0,x.jsx)("span",{className:"gif-container",children:(0,x.jsx)("img",{className:"loading-gif",src:h,alt:""})})});var T=(null===D||void 0===D?void 0:D._id)===(null===b||void 0===b?void 0:b._id);return(0,x.jsxs)("section",{className:"profile-page",children:[(0,x.jsxs)("div",{className:"left",children:[(0,x.jsxs)("div",{className:"user-profile",children:[(0,x.jsx)("div",{className:"bg",style:{backgroundImage:"url(".concat(b.bg,")")},children:(0,x.jsx)("div",{className:"img-container",onClick:function(){P()},children:(0,x.jsx)("img",{src:b.imgUrl,alt:"",className:"img"})})}),(0,x.jsx)("div",{className:"user-details",children:(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"name",children:(0,x.jsx)("h1",{children:b.fullname})}),(0,x.jsx)("div",{className:"profession",children:(0,x.jsx)("p",{children:b.profession})}),(0,x.jsx)("div",{className:"profession",children:(0,x.jsx)("p",{children:b.email})}),(0,x.jsxs)("div",{className:"btns-container",children:[T&&(0,x.jsx)("button",{className:"add-details",onClick:q,children:"Edit profile"}),!T&&(0,x.jsxs)("button",{className:"connect",onClick:G,children:[(0,x.jsx)(u.G,{icon:"fa-solid fa-user-plus"}),(0,x.jsx)("p",{children:F?"Disconnect":"Connect"})]}),(0,x.jsx)("button",{className:"message",onClick:function(){e.push("/main/message/".concat(null===b||void 0===b?void 0:b._id))},children:"Message"})]})]})})]}),(0,x.jsx)("div",{className:"user-posts",children:(null===J||void 0===J?void 0:J.length)&&(0,x.jsx)(f.E,{posts:J})||(0,x.jsx)("div",{children:(0,x.jsxs)("p",{children:[b.fullname," has not published any posts yet."]})})})]}),(0,x.jsxs)("div",{className:"right",children:[(0,x.jsx)("div",{className:"top-div"}),(0,x.jsx)("div",{className:"bottom-div"})]}),y&&(0,x.jsx)(m.O,{toggleShowImg:P,imgUrl:b.imgUrl,title:"Profile photo"}),C&&(0,x.jsx)(j,{toggleShowEditModal:q,user:b})]})}},1672:function(n,e,s){s.d(e,{T:function(){return i},u:function(){return t}});var i=function(n){var e="https://api.cloudinary.com/v1_1/".concat("duajg3ah1","/image/upload"),s=new FormData;return s.append("file",n.target.files[0]),s.append("upload_preset","social_n_shlomi"),fetch(e,{method:"POST",body:s}).then((function(n){return n.json()})).then((function(n){return n})).catch((function(n){console.error(n)}))},t=function(n){var e="https://api.cloudinary.com/v1_1/".concat("duajg3ah1","/video/upload"),s=new FormData;return s.append("file",n.target.files[0]),s.append("upload_preset","social_n_shlomi"),fetch(e,{method:"POST",body:s}).then((function(n){return n.json()})).then((function(n){return n})).catch((function(n){return console.error(n)}))}}}]);
//# sourceMappingURL=974.2d8bd9d7.chunk.js.map